<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Frostworld</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  body { background:#000; overflow:hidden; width:100vw; height:100vh; font-family:'Courier New',monospace; }
  #gameCanvas { display:block; touch-action:none; }
  #ui { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:10; }
  
  /* HUD */
  #hud { position:absolute; top:16px; left:16px; display:flex; gap:12px; align-items:flex-start; }
  .stat-bar { display:flex; flex-direction:column; gap:3px; }
  .stat-label { color:rgba(200,220,255,0.6); font-size:10px; letter-spacing:2px; text-transform:uppercase; }
  .bar-bg { width:120px; height:8px; background:rgba(0,0,0,0.5); border:1px solid rgba(255,255,255,0.15); border-radius:2px; overflow:hidden; }
  .bar-fill { height:100%; border-radius:2px; transition:width 0.3s ease; }
  #healthBar .bar-fill { background:linear-gradient(90deg,#c0392b,#e74c3c); }
  #warmthBar .bar-fill { background:linear-gradient(90deg,#2980b9,#5dade2); }
  #hungerBar .bar-fill { background:linear-gradient(90deg,#8b5e3c,#c49a6c); }
  #staminaBar .bar-fill { background:linear-gradient(90deg,#27ae60,#58d68d); }
  
  /* Weather indicator */
  #weatherHud { position:absolute; top:16px; right:16px; text-align:right; color:rgba(200,220,255,0.7); font-size:11px; letter-spacing:1px; }
  #weatherName { font-size:14px; font-weight:bold; color:#a8d8f0; margin-bottom:4px; }
  #tempDisplay { font-size:20px; color:#5dade2; font-weight:bold; }
  
  /* Hotbar */
  #hotbar { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); display:flex; gap:4px; pointer-events:all; }
  .hotslot { width:56px; height:56px; background:rgba(10,15,30,0.85); border:2px solid rgba(100,150,200,0.3); border-radius:6px; display:flex; align-items:center; justify-content:center; position:relative; cursor:pointer; transition:all 0.15s; }
  .hotslot.selected { border-color:rgba(160,200,255,0.8); background:rgba(20,40,80,0.9); box-shadow:0 0 12px rgba(100,180,255,0.3); }
  .hotslot-icon { font-size:26px; }
  .hotslot-count { position:absolute; bottom:3px; right:5px; font-size:10px; color:#a0c4ff; }
  .hotslot-key { position:absolute; top:2px; left:5px; font-size:9px; color:rgba(255,255,255,0.3); }

  /* Inventory panel */
  #inventory { position:absolute; bottom:90px; left:50%; transform:translateX(-50%); background:rgba(5,10,25,0.95); border:1px solid rgba(100,150,200,0.3); border-radius:10px; padding:16px; display:none; pointer-events:all; min-width:380px; backdrop-filter:blur(10px); }
  #inventory.open { display:block; }
  .inv-title { color:#a8d8f0; font-size:12px; letter-spacing:3px; text-transform:uppercase; margin-bottom:12px; border-bottom:1px solid rgba(100,150,200,0.2); padding-bottom:8px; }
  .inv-grid { display:grid; grid-template-columns:repeat(8,48px); gap:4px; }
  .inv-slot { width:48px; height:48px; background:rgba(0,0,0,0.4); border:1px solid rgba(100,150,200,0.2); border-radius:4px; display:flex; align-items:center; justify-content:center; cursor:pointer; position:relative; transition:all 0.1s; }
  .inv-slot:hover { border-color:rgba(160,200,255,0.5); background:rgba(20,40,80,0.5); }
  .inv-slot .slot-icon { font-size:22px; }
  .inv-slot .slot-count { position:absolute; bottom:2px; right:4px; font-size:9px; color:#a0c4ff; }

  /* Crafting panel */
  #crafting { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:rgba(5,10,25,0.97); border:1px solid rgba(100,150,200,0.3); border-radius:12px; padding:20px; display:none; pointer-events:all; min-width:340px; backdrop-filter:blur(10px); }
  #crafting.open { display:block; }
  .craft-title { color:#a8d8f0; font-size:12px; letter-spacing:3px; text-transform:uppercase; margin-bottom:16px; border-bottom:1px solid rgba(100,150,200,0.2); padding-bottom:8px; }
  .recipe-list { display:flex; flex-direction:column; gap:6px; max-height:60vh; overflow-y:auto; }
  .recipe-item { display:flex; align-items:center; justify-content:space-between; padding:8px 12px; background:rgba(0,0,0,0.3); border:1px solid rgba(100,150,200,0.15); border-radius:6px; cursor:pointer; transition:all 0.15s; }
  .recipe-item:hover { border-color:rgba(160,200,255,0.4); background:rgba(20,40,80,0.4); }
  .recipe-item.craftable { border-color:rgba(80,200,120,0.3); }
  .recipe-name { color:#c8e0f8; font-size:13px; display:flex; align-items:center; gap:8px; }
  .recipe-reqs { font-size:10px; color:rgba(200,220,255,0.5); }
  .craft-btn { padding:4px 10px; background:rgba(40,100,60,0.6); border:1px solid rgba(80,200,120,0.4); color:#80e0a0; font-size:11px; border-radius:4px; cursor:pointer; font-family:inherit; }
  .craft-btn:hover { background:rgba(60,150,90,0.8); }
  .craft-btn:disabled { opacity:0.4; cursor:not-allowed; }

  /* Action buttons (touch) */
  #touchControls { position:absolute; bottom:90px; display:flex; flex-direction:column; gap:8px; pointer-events:all; }
  #touchLeft { left:16px; }
  #touchRight { right:16px; }
  .touch-btn { width:60px; height:60px; background:rgba(10,20,50,0.7); border:2px solid rgba(100,150,200,0.3); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:22px; cursor:pointer; user-select:none; }
  
  /* D-pad */
  #dpad { position:absolute; bottom:90px; left:20px; width:150px; height:150px; pointer-events:all; }
  .dpad-btn { position:absolute; width:46px; height:46px; background:rgba(10,20,50,0.8); border:2px solid rgba(100,150,200,0.25); border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:20px; cursor:pointer; user-select:none; color:rgba(180,210,255,0.7); }
  #dpad-up    { top:0;   left:52px; }
  #dpad-down  { bottom:0; left:52px; }
  #dpad-left  { top:52px; left:0;   }
  #dpad-right { top:52px; right:0;  }
  #dpad-mid   { top:52px; left:52px; border-radius:50%; font-size:14px; }

  /* Right action buttons */
  #actionBtns { position:absolute; bottom:90px; right:20px; display:grid; grid-template-columns:repeat(2,50px); gap:6px; pointer-events:all; }
  .action-btn { width:50px; height:50px; background:rgba(10,20,50,0.8); border:2px solid rgba(100,150,200,0.25); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:16px; cursor:pointer; user-select:none; color:rgba(180,210,255,0.8); flex-direction:column; gap:1px; }
  .action-btn span { font-size:8px; color:rgba(150,180,220,0.6); }

  /* Tooltip */
  #tooltip { position:absolute; background:rgba(5,10,25,0.95); border:1px solid rgba(100,150,200,0.3); border-radius:6px; padding:8px 12px; color:#c8e0f8; font-size:12px; pointer-events:none; display:none; max-width:200px; }

  /* Message log */
  #msgLog { position:absolute; top:100px; left:16px; display:flex; flex-direction:column; gap:3px; pointer-events:none; }
  .msg { color:rgba(200,220,255,0.8); font-size:11px; background:rgba(0,0,0,0.4); padding:3px 8px; border-left:2px solid rgba(100,180,255,0.4); border-radius:0 3px 3px 0; animation:msgFade 4s forwards; }
  .msg.warn { border-left-color:rgba(255,180,50,0.6); color:rgba(255,220,150,0.9); }
  .msg.danger { border-left-color:rgba(255,80,80,0.6); color:rgba(255,150,150,0.9); }
  @keyframes msgFade { 0%{opacity:1;transform:translateX(0)} 70%{opacity:1} 100%{opacity:0;transform:translateX(-10px)} }

  /* Overlays */
  #deathScreen { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0); display:none; align-items:center; justify-content:center; flex-direction:column; gap:20px; pointer-events:all; transition:background 2s; }
  #deathScreen.active { display:flex; background:rgba(30,0,0,0.85); }
  #deathScreen h1 { color:#c0392b; font-size:48px; letter-spacing:8px; text-shadow:0 0 40px rgba(200,0,0,0.8); }
  #deathScreen p { color:rgba(255,200,200,0.7); font-size:14px; letter-spacing:2px; }
  .big-btn { padding:12px 32px; background:rgba(100,0,0,0.5); border:2px solid rgba(200,50,50,0.5); color:#e07070; font-size:14px; letter-spacing:3px; cursor:pointer; font-family:inherit; border-radius:6px; transition:all 0.2s; }
  .big-btn:hover { background:rgba(150,0,0,0.7); border-color:rgba(255,80,80,0.7); }
  
  /* Loading */
  #loading { position:absolute; top:0; left:0; width:100%; height:100%; background:#000510; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:16px; z-index:100; }
  #loading h1 { color:#a8d8f0; font-size:32px; letter-spacing:12px; }
  #loading p { color:rgba(150,180,220,0.6); font-size:11px; letter-spacing:4px; animation:pulse 1.5s infinite; }
  #loadBar { width:200px; height:3px; background:rgba(100,150,200,0.2); border-radius:2px; overflow:hidden; }
  #loadFill { height:100%; background:linear-gradient(90deg,#2980b9,#a8d8f0); width:0%; transition:width 0.3s; border-radius:2px; }
  @keyframes pulse { 0%,100%{opacity:0.4} 50%{opacity:1} }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="ui">
  <!-- HUD -->
  <div id="hud">
    <div class="stat-bar" id="healthBar"><div class="stat-label">Health</div><div class="bar-bg"><div class="bar-fill" style="width:100%"></div></div></div>
    <div class="stat-bar" id="warmthBar"><div class="stat-label">Warmth</div><div class="bar-bg"><div class="bar-fill" style="width:100%"></div></div></div>
    <div class="stat-bar" id="hungerBar"><div class="stat-label">Hunger</div><div class="bar-bg"><div class="bar-fill" style="width:100%"></div></div></div>
    <div class="stat-bar" id="staminaBar"><div class="stat-label">Stamina</div><div class="bar-bg"><div class="bar-fill" style="width:100%"></div></div></div>
  </div>
  <div id="weatherHud">
    <div id="weatherName">Clear</div>
    <div id="tempDisplay">-8¬∞C</div>
  </div>
  <!-- Hotbar -->
  <div id="hotbar"></div>
  <!-- D-pad -->
  <div id="dpad">
    <div class="dpad-btn" id="dpad-up">‚ñ≤</div>
    <div class="dpad-btn" id="dpad-down">‚ñº</div>
    <div class="dpad-btn" id="dpad-left">‚óÄ</div>
    <div class="dpad-btn" id="dpad-right">‚ñ∂</div>
    <div class="dpad-btn" id="dpad-mid">‚óè</div>
  </div>
  <!-- Action buttons -->
  <div id="actionBtns">
    <div class="action-btn" id="btn-mine">‚õè<span>MINE</span></div>
    <div class="action-btn" id="btn-place">üß±<span>PLACE</span></div>
    <div class="action-btn" id="btn-inv">üéí<span>INV</span></div>
    <div class="action-btn" id="btn-craft">‚öôÔ∏è<span>CRAFT</span></div>
  </div>
  <!-- Inventory -->
  <div id="inventory">
    <div class="inv-title">Inventory</div>
    <div class="inv-grid" id="invGrid"></div>
  </div>
  <!-- Crafting -->
  <div id="crafting">
    <div class="craft-title">Crafting</div>
    <div class="recipe-list" id="recipeList"></div>
  </div>
  <!-- Tooltip -->
  <div id="tooltip"></div>
  <!-- Messages -->
  <div id="msgLog"></div>
  <!-- Death -->
  <div id="deathScreen">
    <h1>FROZEN</h1>
    <p>You could not survive the cold world</p>
    <button class="big-btn" onclick="game.respawn()">TRY AGAIN</button>
  </div>
  <!-- Loading -->
  <div id="loading">
    <h1>FROSTWORLD</h1>
    <div id="loadBar"><div id="loadFill"></div></div>
    <p id="loadText">GENERATING WORLD...</p>
  </div>
</div>

<script src="engine.js"></script>
<script src="world.js"></script>
<script src="entities.js"></script>
<script src="ui.js"></script>
<script src="main.js"></script>
</body>
</html>
